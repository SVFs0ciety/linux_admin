Запуск основного файла - playbook.yml
playbook.yml автоматически развернет nginx + php 81 + php-fpm + mysql + csf + maldet + lynis + wordpress

В папке configs содержатся конфигурационные файлы nginx,csf,php.Файлы автоматически подтягиваются на сервер из этого каталога при установке служб через плейбуки.

Примечание csf не отрабатывает на Ubuntu 18 через playbook
Точнее все устанавливается но не запускается.Если не запускается,то необходимо перейти в каталог /etc/csf/ и сделать sh unistall.sh,
после этого перейти в каталог куда скачались бинарники /usr/src/csf и сделать снова установку командой install.sh и уже самим подкинуть файлы csf.conf,csf.allow,csf.blocklist.Файлы уже настроены кроме csf.allow
csf.conf - настроеный.Стоит даже блокировка по странам,а точнее блокировка на РФ.
csf.allow - вход по ssh исключительно из списка IP адресов.Пример приведен в файле

В папке nginx лежит 2 файла nginx.conf.j2,default.j2
nginx.conf.j2 - оптимизированный кофигурационный файл веб сервера
default.j2 - оптимизированный конфигурационный файл виртуального хоста по умолчанию

В папке php лежит файл php.ini.j2 отвечающий за оптимизированные настройки PHP для WP. 

Также присутсвует плейбук под названием Lynis.Это утилита для проверки защищенности сервера.

Так же присутствует плейбук Maldet.Это сканер, с помощью которого можно проверить сервер на наличие подозрительных и проблемных скриптов (шеллы, скрипты для спама и т. п.) в системе в принципе или, например, в файлах сайта в частности.Умеет:
Находить подозрительные файлы (и уведомлять об этом);
Находить и отправлять на карантин проблемные скрипты (и уведомлять об этом);
Находить и по возможности лечить обнаруженное (и уведомлять об этом);
Сканировать только те файлы, которые появились и были изменены за определённые промежуток времени;
В интерактивном режиме осуществлять мониторинг в определённой директории;
Работать с исключениями, добавляя в них как конкретные сигнатуры, так и пути/конкретные файлы на сервере;
Отправлять подозрительные файлы на анализ, на серверы Maldet’а;
Автоматически и вручную обновлять собственные сигнатуры и версию самого сканера


Создание базы данных:
- В файле wordpress.yml содержатся строки 

cmd: mysql -u root -pmEsh0chek -e "CREATE DATABASE wpdb; CREATE USER 'linux'@localhost IDENTIFIED BY 'mEsh0chek'; GRANT ALL PRIVILEGES ON wpdb.* TO linux@localhost IDENTIFIED BY 'mEsh0chek'; FLUSH PRIVILEGES;"
Эта строка отвечает за создание пользователя и бд.

Эти строки отвечают за конфигурационный файл wp-config.php,отвечающий за подключение к БД.

 with_items:
        - {'regexp': "define\\( 'DB_NAME', '(.)+' \\);", 'line': "define( 'DB_NAME', 'вписать сюда' );"}
        - {'regexp': "define\\( 'DB_USER', '(.)+' \\);", 'line': "define( 'DB_USER', 'вписать сюда' );"}
        - {'regexp': "define\\( 'DB_PASSWORD', '(.)+' \\);", 'line': "define( 'DB_PASSWORD', 'вписать сюда' );"}
